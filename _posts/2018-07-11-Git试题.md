---
layout:     post
title:      Git题目
subtitle:   不服气！
date:       2018-07-13
author:     Hxd
header-img: img/git.jpg
catalog: true
tags:
    - Git
---

# 题记
**此题目题解均为个人观点，通过网上查资料和实践而得，若有错误欢迎指正。**

**联系方式： 主页右边email**

## No.1

如果提示提交内容为空、不能提交，则最为合适的处理方式是：()

a) 执行 git status 查看状态，再执行 git add 命令选择要提交的文件，然后提交。 

b) 执行 git commit --allow-empty ，允许空提交。 

c) 执行 git commit -a ，提交所有改动。 

d) 执行 git commit --amend 进行修补提交。 

**答案：A**  首先看懂题目的意思，“提交内容为空”是什么意思呢？一种情况是：你在工作区做了修改，但是没有add就执行commit了，这种情况可以用git status命令查看：

```
$ git commit -m "No.1"
On branch master
Changes not staged for commit:
        modified:   readme.md

no changes added to commit

$ git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        modified:   readme.md

no changes added to commit (use "git add" and/or "git commit -a")
```
这个时候就可以用A选项的方式重新提交。
第二种情况是：你没有做任何修改就commit：
```
$ git commit -m "No.1"
On branch master
nothing to commit, working tree clean
```
这时候会有这个提示。
再看看B选项：git commit --allow-empty这个命令的意思是允许空提交。
```
git commit --allow-empty -m '[empty] initial commit'
```
这个提交不会对版本库有有效的更改，若这样提交，在第一种情况下工作区的修改也就没能提交到版本库。C选项的意思是add全部有改动的文件到缓存区。这样做会添加所有的改动。但是还是少了commit步骤。D选项：
```
git commit --amend 撤销上一次提交  并讲暂存区文件重新提交
类似的撤销修改命令：
git checkout -- <file>     拉取暂存区文件 并将其替换成工作区文件
git reset HEAD  -- <file>  拉取最近一次提交到版本库的文件到暂存区  改操作不影响工作区
```
amend操作可以帮我们 修改 最近一次提交到版本库的内容。例如：
```
$ git commit -m "No.1"
[master 36e396f] No.1
 1 file changed, 1 insertion(+), 1 deletion(-)

$ git lg
* 36e396f - (HEAD -> master) No.1 (3 seconds ago) <黄显东>
* 0728e96 - (dev) add a (3 days ago) <黄显东_20731>


$ git commit --amend
[master 316355a] No.1
 Date: Fri Jul 13 09:31:54 2018 +0800
 1 file changed, 1 insertion(+), 1 deletion(-)

$ git lg
* 316355a - (HEAD -> master) No.1 (26 seconds ago) <黄显东>
* 0728e96 - (dev) add a (3 days ago) <黄显东_20731>

```
可以看出36e396f已经被修改为316355a。
这个功能使用的场景是[git commit --amend用法](https://blog.csdn.net/zhujiangtaotaise/article/details/73505770)：
```
比方说，你的代码已经提交到git库，leader审核的时候发现有个Java文件代码有点问题，于是让你修改，通常有2种方法：

方法1：leader 将你提交的所有代码 abandon掉，然后你回去 通过git reset …将代码回退到你代码提交之前的版本，然后你修改出问题的Java文件，然后 git add xx.java xxx.java -s -m “Porject : 1.修改bug…” 
最后通过 git push origin HEAD:refs/for/branches

方法2： 
leader不abandon代码，你回去之后，修改出问题的Java文件，修改好之后，git add 该出问题.java 
然后 git commit –amend –no-edit, 
最后 git push origin HEAD:refs/for/branches。
```

## No.2

如果把项目中文件 hello.c 的内容破坏了，如何使其还原至原始版本？ 

 a) git reset -- hello.c 
 
 b) git checkout HEAD -- hello.c 
 
 c) git revert hello.c 
 
 d) git update hello.c 

 **答案：C**  假如hello.c文件在工作区修改了，已经add而且hi没有commit，可以用git checkout -- hello.c 命令从缓存区撤回到工作区的修改，如果已经commit可以用git reset HEAD -- hello.c 命令从版本库撤回到缓存区，再用git checkout HEAD -- hello.c命令。(HEAD指向头指针，不加的话默认为当前分支)

 git revert hello.c 命令撤销 某次操作，此次操作之前和之后的commit和history都会保留，并且把这次撤销作为一次最新的提交[git revert 用法](https://www.cnblogs.com/0616--ataozhijia/p/3709917.html)

 比如：
 ```

$ git lg
* fdfc012 - (HEAD -> master) No.2 (6 seconds ago) <黄显东>
* 2ec083f - No.1 (31 minutes ago) <黄显东>
* 316355a - No.1 (34 minutes ago) <黄显东>


$ git revert HEAD
[master a590300] Revert "No.2"


$ git lg
* a590300 - (HEAD -> master) Revert "No.2" (11 seconds ago) <黄显
东>
* fdfc012 - No.2 (88 seconds ago) <黄显东>
* 2ec083f - No.1 (32 minutes ago) <黄显东>
* 316355a - No.1 (34 minutes ago) <黄显东>
```
D选项，git update 命令好像找不到。

## No.3

修改的文档 meeting.doc 尚未提交，因为错误地执行了 git reset --hard 导致数据丢失。丢失的数据能找回么？

a) 不能。执行硬重置使工作区文件被覆盖，导致数据丢失无法找回。 

b) 能。可以通过 git checkout HEAD@{1} -- meeting.doc 找回。 

c) 不确定。如果在重置前执行了 git add 命令将 meeting.doc 加入了暂存区，则可以在对象库中处于悬空状态 的文件中找到。 

d) 不能。因为未提交所以无法找回。 

**答案：**  